<!DOCTYPE html>
<html lang="en">
<head>

<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<script>
    // Dynamically load the navigation menu
    document.addEventListener('DOMContentLoaded', function () {
        fetch('nav.html')
            .then(response => response.text())
            .then(data => {
                const navContainer = document.createElement('div');
                navContainer.innerHTML = data;
                document.body.insertBefore(navContainer.firstChild, document.body.firstChild);
            })
            .catch(error => console.error('Error loading navigation menu:', error));
    });
</script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Log</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav>
    <ul>
      <li><a href="customer-intake.html">Customer Intake</a></li>
      <li><a href="buy-back.html">Buy-Back POS</a></li>
      <li><a href="inventory.html">Inventory</a></li>
      <li><a href="customer-log.html">Customer Log</a></li>
    </ul>
  </nav>
  <div class="container">
    <h1>Customer Log</h1>
    <div class="card">
      <div class="table-controls">
        <div class="search-filter">
          <input type="text" id="customerSearch" placeholder="Search customers...">
          <input type="date" id="dateFilter">
        </div>
        <div class="export-button">
          <button id="exportCustomers">Export to CSV</button>
        </div>
      </div>
      <table id="customerLogTable">
        <thead>
          <tr>
            <th>Customer ID</th>
            <th>Customer Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Total Transactions</th>
            <th>Last Visit</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows will be added here dynamically -->
        </tbody>
      </table>
    </div>
    
    <!-- Customer Details Modal -->
    <div id="customerModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Customer Details</h2>
        <div id="customerDetails">
          <!-- Customer details will be inserted here -->
        </div>
      </div>
    </div>
  </div>
  <script src="customer-log.js"></script>

<script>
    const authButton = document.getElementById('auth-button');

    // Check if the user is logged in
    const isLoggedIn = localStorage.getItem('isLoggedIn');

    // Update the button text and functionality
    if (isLoggedIn === 'true') {
        authButton.textContent = 'Logout';
        authButton.classList.replace('bg-green-500', 'bg-red-500');
        authButton.addEventListener('click', () => {
            // Logout logic
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('role');
            window.location.href = 'login.html'; // Redirect to login page
        });
    } else {
        authButton.textContent = 'Login';
        authButton.addEventListener('click', () => {
            // Redirect to login page
            window.location.href = 'login.html';
        });
    }
</script>

<script src="auth.js"></script>


</body>
</html>